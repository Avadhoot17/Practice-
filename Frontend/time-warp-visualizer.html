<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Time Warp Visualizer</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  background: #050510;
  overflow: hidden;
  font-family: system-ui, sans-serif;
  color: white;
}

canvas {
  display: block;
}

.ui {
  position: fixed;
  top: 20px;
  left: 20px;
  z-index: 10;
  opacity: 0.8;
}

button {
  background: linear-gradient(135deg, #7f00ff, #e100ff);
  border: none;
  color: white;
  padding: 12px 22px;
  border-radius: 25px;
  cursor: pointer;
  font-size: 14px;
}

.info {
  position: fixed;
  bottom: 20px;
  width: 100%;
  text-align: center;
  font-size: 12px;
  opacity: 0.6;
}
</style>
</head>

<body>

<div class="ui">
  <button id="timeBtn">Toggle Time Warp</button>
</div>

<canvas id="c"></canvas>
<div class="info">Click to create energy â€¢ Move mouse to bend space</div>

<script>
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");

let w, h;
function resize() {
  w = canvas.width = window.innerWidth;
  h = canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

let particles = [];
let mouse = { x: w / 2, y: h / 2 };
let timeScale = 1;

document.addEventListener("mousemove", e => {
  mouse.x = e.clientX;
  mouse.y = e.clientY;
});

document.addEventListener("click", e => {
  for (let i = 0; i < 40; i++) {
    particles.push({
      x: e.clientX,
      y: e.clientY,
      vx: Math.cos(i) * Math.random() * 4,
      vy: Math.sin(i) * Math.random() * 4,
      life: 200,
      size: Math.random() * 3 + 1,
      hue: Math.random() * 360
    });
  }
});

document.getElementById("timeBtn").onclick = () => {
  timeScale = timeScale === 1 ? 0.3 : 1;
};

function animate() {
  ctx.fillStyle = "rgba(5,5,16,0.15)";
  ctx.fillRect(0, 0, w, h);

  particles.forEach((p, i) => {
    const dx = mouse.x - p.x;
    const dy = mouse.y - p.y;
    const dist = Math.sqrt(dx * dx + dy * dy) || 1;

    p.vx += dx / dist * 0.05;
    p.vy += dy / dist * 0.05;

    p.x += p.vx * timeScale;
    p.y += p.vy * timeScale;
    p.life--;

    ctx.beginPath();
    ctx.fillStyle = `hsla(${p.hue},100%,60%,0.8)`;
    ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
    ctx.fill();

    if (p.life <= 0) particles.splice(i, 1);
  });

  requestAnimationFrame(animate);
}

animate();
</script>

</body>
</html>
