<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Future UI Trick Plus</title>

<style>
:root {
  --hue: 200;
  --scale: 1;
  --rotate: 0deg;
  --blur: 0px;
  --glow: 0px;
}

* {
  box-sizing: border-box;
  font-family: system-ui, sans-serif;
}

body {
  margin: 0;
  min-height: 300vh;
  background:
    radial-gradient(
      circle at top,
      hsl(var(--hue), 80%, 20%),
      hsl(var(--hue), 80%, 5%)
    );
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
}

.card {
  width: 340px;
  height: 220px;
  border-radius: 24px;
  background: hsl(var(--hue), 80%, 55%);
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 20px;
  font-size: 1.3rem;
  font-weight: 600;
  transform:
    scale(var(--scale))
    rotate(var(--rotate));
  filter: blur(var(--blur));
  box-shadow:
    0 0 var(--glow) hsl(var(--hue), 90%, 70%),
    0 30px 60px rgba(0,0,0,0.5);
  transition: 0.3s ease;
  cursor: pointer;
  user-select: none;
}

.hint {
  position: fixed;
  bottom: 16px;
  opacity: 0.6;
  font-size: 0.8rem;
}
</style>
</head>

<body>

<div class="card" tabindex="0">
  Touch â€¢ Scroll â€¢ Hover â€¢ Keys
</div>

<div class="hint">
  Try: Scroll | Hover | Double Click | Arrow Keys | Stay Idle
</div>

<script>
const root = document.documentElement;
const card = document.querySelector('.card');

/* âš™ï¸ Reactive state */
const state = new Proxy(
  {
    hue: 200,
    scale: 1,
    rotate: 0,
    blur: 0,
    glow: 0,
    mode: 'active'
  },
  {
    set(obj, key, value) {
      obj[key] = value;
      root.style.setProperty(
        `--${key}`,
        typeof value === 'number' && key !== 'rotate'
          ? value
          : key === 'rotate'
          ? value + 'deg'
          : value
      );
      return true;
    }
  }
);

/* ðŸŒ€ Scroll = motion */
addEventListener('scroll', () => {
  const s = scrollY;
  state.rotate = s / 8;
  state.hue = (200 + s / 6) % 360;
});

/* âœ‹ Hover = focus */
card.onmouseenter = () => {
  state.scale = 1.15;
  state.glow = 40;
};

card.onmouseleave = () => {
  state.scale = 1;
  state.glow = 0;
};

/* ðŸ‘† Double click = mode switch */
card.ondblclick = () => {
  state.mode = state.mode === 'active' ? 'sleep' : 'active';
  state.blur = state.mode === 'sleep' ? 2 : 0;
};

/* âŒ¨ï¸ Keyboard controls */
card.onkeydown = e => {
  if (e.key === 'ArrowLeft') state.rotate -= 10;
  if (e.key === 'ArrowRight') state.rotate += 10;
  if (e.key === 'ArrowUp') state.scale += 0.05;
  if (e.key === 'ArrowDown') state.scale -= 0.05;
};

/* ðŸ•’ Idle detection */
let idleTimer;
const idle = () => {
  clearTimeout(idleTimer);
  state.mode = 'active';
  idleTimer = setTimeout(() => {
    state.mode = 'idle';
    state.blur = 1.5;
    state.glow = 15;
  }, 4000);
};

['mousemove','scroll','keydown','click'].forEach(e =>
  addEventListener(e, idle)
);

/* ðŸŒ™ Time-aware behavior */
const hour = new Date().getHours();
if (hour >= 19 || hour <= 6) {
  state.hue = 260;
}

/* ðŸ§  Memory */
const savedHue = localStorage.getItem('ui-hue');
if (savedHue) state.hue = savedHue;

window.addEventListener('beforeunload', () => {
  localStorage.setItem('ui-hue', state.hue);
});

/* ðŸ‘€ Visibility awareness */
const observer = new IntersectionObserver(entries => {
  entries.forEach(e => {
    if (!e.isIntersecting) {
      state.scale = 0.9;
      state.blur = 2;
    } else {
      state.scale = 1;
      state.blur = 0;
    }
  });
});
observer.observe(card);
</script>

</body>
</html>
